{"version":3,"file":"rateLimiter.js","names":["Duration","Effect","FiberRef","pipe","globalValue","make","algorithm","interval","limit","fixedWindow","tokenBucket","window","gen","millisPerToken","Math","ceil","toMillis","semaphore","makeSemaphore","latch","refill","sleep","zipRight","releaseAll","release","flatMap","free","void","take","forever","forkScoped","interruptible","uninterruptibleMask","restore","get","currentCost","cost","effect","Symbol","for","unsafeMake","withCost","locally"],"sources":["../../../src/internal/rateLimiter.ts"],"sourcesContent":[null],"mappings":"AACA,OAAO,KAAKA,QAAQ,MAAM,gBAAgB;AAC1C,OAAO,KAAKC,MAAM,MAAM,cAAc;AACtC,OAAO,KAAKC,QAAQ,MAAM,gBAAgB;AAC1C,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,WAAW,QAAQ,mBAAmB;AAI/C;AACA,OAAO,MAAMC,IAAI,GAAGA,CAAC;EACnBC,SAAS,GAAG,cAAc;EAC1BC,QAAQ;EACRC;AAAK,CAC2B,KAI9B;EACF,QAAQF,SAAS;IACf,KAAK,cAAc;MAAE;QACnB,OAAOG,WAAW,CAACD,KAAK,EAAED,QAAQ,CAAC;MACrC;IACA,KAAK,cAAc;MAAE;QACnB,OAAOG,WAAW,CAACF,KAAK,EAAED,QAAQ,CAAC;MACrC;EACF;AACF,CAAC;AAED,MAAMG,WAAW,GAAGA,CAACF,KAAa,EAAEG,MAAqB,KAKvDV,MAAM,CAACW,GAAG,CAAC,aAAS;EAClB,MAAMC,cAAc,GAAGC,IAAI,CAACC,IAAI,CAACf,QAAQ,CAACgB,QAAQ,CAACL,MAAM,CAAC,GAAGH,KAAK,CAAC;EACnE,MAAMS,SAAS,GAAG,OAAOhB,MAAM,CAACiB,aAAa,CAACV,KAAK,CAAC;EACpD,MAAMW,KAAK,GAAG,OAAOlB,MAAM,CAACiB,aAAa,CAAC,CAAC,CAAC;EAC5C,MAAME,MAAM,GAAwBnB,MAAM,CAACoB,KAAK,CAACR,cAAc,CAAC,CAACV,IAAI,CACnEF,MAAM,CAACqB,QAAQ,CAACH,KAAK,CAACI,UAAU,CAAC,EACjCtB,MAAM,CAACqB,QAAQ,CAACL,SAAS,CAACO,OAAO,CAAC,CAAC,CAAC,CAAC,EACrCvB,MAAM,CAACwB,OAAO,CAAEC,IAAI,IAAKA,IAAI,KAAKlB,KAAK,GAAGP,MAAM,CAAC0B,IAAI,GAAGP,MAAM,CAAC,CAChE;EACD,OAAOjB,IAAI,CACTgB,KAAK,CAACS,IAAI,CAAC,CAAC,CAAC,EACb3B,MAAM,CAACqB,QAAQ,CAACF,MAAM,CAAC,EACvBnB,MAAM,CAAC4B,OAAO,EACd5B,MAAM,CAAC6B,UAAU,EACjB7B,MAAM,CAAC8B,aAAa,CACrB;EACD,MAAMH,IAAI,GAAG3B,MAAM,CAAC+B,mBAAmB,CAAEC,OAAO,IAC9ChC,MAAM,CAACwB,OAAO,CACZvB,QAAQ,CAACgC,GAAG,CAACC,WAAW,CAAC,EACxBC,IAAI,IAAKnC,MAAM,CAACqB,QAAQ,CAACW,OAAO,CAAChB,SAAS,CAACW,IAAI,CAACQ,IAAI,CAAC,CAAC,EAAEjB,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC,CAC3E,CACF;EACD,OAAQa,MAAM,IAAKpC,MAAM,CAACqB,QAAQ,CAACM,IAAI,EAAES,MAAM,CAAC;AAClD,CAAC,CAAC;AAEJ,MAAM5B,WAAW,GAAGA,CAACD,KAAa,EAAEG,MAAqB,KAKvDV,MAAM,CAACW,GAAG,CAAC,aAAS;EAClB,MAAMK,SAAS,GAAG,OAAOhB,MAAM,CAACiB,aAAa,CAACV,KAAK,CAAC;EACpD,MAAMW,KAAK,GAAG,OAAOlB,MAAM,CAACiB,aAAa,CAAC,CAAC,CAAC;EAC5C,OAAOf,IAAI,CACTgB,KAAK,CAACS,IAAI,CAAC,CAAC,CAAC,EACb3B,MAAM,CAACqB,QAAQ,CAACrB,MAAM,CAACoB,KAAK,CAACV,MAAM,CAAC,CAAC,EACrCV,MAAM,CAACqB,QAAQ,CAACH,KAAK,CAACI,UAAU,CAAC,EACjCtB,MAAM,CAACqB,QAAQ,CAACL,SAAS,CAACM,UAAU,CAAC,EACrCtB,MAAM,CAAC4B,OAAO,EACd5B,MAAM,CAAC6B,UAAU,EACjB7B,MAAM,CAAC8B,aAAa,CACrB;EACD,MAAMH,IAAI,GAAG3B,MAAM,CAAC+B,mBAAmB,CAAEC,OAAO,IAC9ChC,MAAM,CAACwB,OAAO,CACZvB,QAAQ,CAACgC,GAAG,CAACC,WAAW,CAAC,EACxBC,IAAI,IAAKnC,MAAM,CAACqB,QAAQ,CAACW,OAAO,CAAChB,SAAS,CAACW,IAAI,CAACQ,IAAI,CAAC,CAAC,EAAEjB,KAAK,CAACK,OAAO,CAAC,CAAC,CAAC,CAAC,CAC3E,CACF;EACD,OAAQa,MAAM,IAAKpC,MAAM,CAACqB,QAAQ,CAACM,IAAI,EAAES,MAAM,CAAC;AAClD,CAAC,CAAC;AAEJ;AACA,MAAMF,WAAW,gBAAG/B,WAAW,cAC7BkC,MAAM,CAACC,GAAG,CAAC,gCAAgC,CAAC,EAC5C,MAAMrC,QAAQ,CAACsC,UAAU,CAAC,CAAC,CAAC,CAC7B;AAED;AACA,OAAO,MAAMC,QAAQ,GAAIL,IAAY,IAAKnC,MAAM,CAACyC,OAAO,CAACP,WAAW,EAAEC,IAAI,CAAC","ignoreList":[]}