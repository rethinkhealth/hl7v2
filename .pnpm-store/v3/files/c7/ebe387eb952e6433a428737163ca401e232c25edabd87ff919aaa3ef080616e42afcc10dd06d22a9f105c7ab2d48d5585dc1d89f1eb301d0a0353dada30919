{"version":3,"file":"FiberHandle.js","names":["Cause","Deferred","Effect","Exit","Fiber","FiberId","constFalse","dual","HashSet","Inspectable","Option","pipeArguments","Predicate","Runtime","TypeId","Symbol","for","isFiberHandle","u","hasProperty","Proto","toString","format","toJSON","_id","state","NodeInspectSymbol","pipe","arguments","unsafeMake","deferred","self","Object","create","_tag","fiber","undefined","make","acquireRelease","map","handle","withFiberRuntime","parent","void","intoDeferred","asVoid","interruptAs","combine","id","internalFiberId","done","makeRuntime","flatMap","runtime","makeRuntimePromise","runtimePromise","internalFiberIdId","isInternalInterruption","reduceWithContext","emptyCase","failCase","dieCase","interruptCase","_","fiberId","has","ids","sequentialCase","left","right","parallelCase","unsafeSet","args","options","unsafeInterruptAsFork","none","onlyIfMissing","addObserver","exit","isFailure","propagateInterruption","cause","isInterruptedOnly","unsafeDone","set","fiberIdWith","sync","unsafeGet","fromNullable","get","suspend","clear","uninterruptibleMask","restore","zipRight","constInterruptedFiber","runFork","interrupt","run","isEffect","runImpl","effect","tap","forkDaemon","Promise","resolve","reject","isSuccess","value","squash","join","await","awaitEmpty"],"sources":["../../src/FiberHandle.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}