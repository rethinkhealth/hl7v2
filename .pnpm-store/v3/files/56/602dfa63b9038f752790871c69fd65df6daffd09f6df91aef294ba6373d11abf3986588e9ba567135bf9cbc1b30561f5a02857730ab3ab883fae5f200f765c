{"version":3,"file":"Layer.js","names":["Context","_interopRequireWildcard","require","_Function","_clock","core","defaultServices","fiberRuntime","internal","circularLayer","query","_random","Scheduler","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","LayerTypeId","exports","MemoMapTypeId","CurrentMemoMap","isLayer","isFresh","annotateLogs","annotateSpans","build","buildWithScope","catchAll","catchAllCause","context","die","dieSync","discard","effect","fromEffect","effectDiscard","fromEffectDiscard","effectContext","fromEffectContext","empty","extendScope","fail","failSync","failCause","failCauseSync","flatMap","flatten","fresh","mock","fromFunction","function","launch","map","mapError","match","matchCause","memoize","merge","mergeAll","orDie","orElse","passthrough","project","locallyEffect","locally","fiberRefLocally","locallyWith","fiberRefLocallyWith","locallyScoped","fiberRefLocallyScoped","fiberRefLocallyScopedWith","retry","scope","scoped","scopedDiscard","scopedContext","service","succeed","succeedContext","suspend","sync","syncContext","tap","tapError","tapErrorCause","toRuntime","toRuntimeWithMemoMap","provide","provideMerge","zipWith","unwrapEffect","unwrapScoped","setClock","clock","currentServices","add","clockTag","setConfigProvider","parentSpan","setRandom","random","randomTag","setRequestBatching","requestBatching","currentRequestBatching","setRequestCaching","requestCaching","currentCacheEnabled","setRequestCache","cache","isEffect","x","currentCache","setScheduler","scheduler","currentScheduler","span","setTracer","setTracerEnabled","enabled","currentTracerEnabled","setTracerTiming","currentTracerTimingEnabled","setUnhandledErrorLogLevel","level","currentUnhandledErrorLogLevel","setVersionMismatchErrorLogLevel","currentVersionMismatchErrorLogLevel","withSpan","withParentSpan","makeMemoMap","buildWithMemoMap","updateService","dual","layer","tag","c","unsafeGet"],"sources":["../../src/Layer.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}