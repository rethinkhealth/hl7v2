{"version":3,"file":"tSubscriptionRef.js","names":["Effect","_interopRequireWildcard","require","_Function","Option","_Pipeable","STM","TPubSub","TQueue","TRef","stream","_tQueue","_tRef","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","TSubscriptionRefSymbolKey","TSubscriptionRefTypeId","exports","Symbol","for","TSubscriptionRefVariance","_A","_","TDequeueMerge","first","second","TDequeueTypeId","tDequeueVariance","constructor","peek","gen","peekOption","_tag","value","retry","none","take","isEmpty","takeAll","takeUpTo","max","length","capacity","size","isFull","shutdown","isShutdown","awaitShutdown","TSubscriptionRefImpl","ref","pubsub","TRefTypeId","tRefVariance","todos","versioned","pipe","pipeArguments","arguments","changes","unbounded","offer","subscribe","modify","map","flatMap","b","a","as","zipLeft","publish","make","all","self","dual","getAndSet","getAndUpdate","getAndUpdateSome","match","onNone","onSome","setAndGet","modifySome","fallback","update","updateAndGet","updateSome","updateSomeAndGet","changesScoped","acquireRelease","changesStream","unwrap","fromTQueue"],"sources":["../../../../src/internal/stm/tSubscriptionRef.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}