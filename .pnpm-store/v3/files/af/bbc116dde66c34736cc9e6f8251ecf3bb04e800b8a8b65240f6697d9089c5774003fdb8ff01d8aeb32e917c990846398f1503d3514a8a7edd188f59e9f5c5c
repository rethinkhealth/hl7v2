import{isFunction}from"../guard/is-function.js";import{isPrimitive}from"../guard/is-primitive.js";import{isReadable}from"../guard/is-readable.js";import{Err,Ok}from"../result/index.js";import{isErr}from"../result/is-err.js";import{isOk}from"../result/is-ok.js";export function get(r,...i){return isReadable(r)?i.reduce(getChild,r):ERR_UNREADABLE_ORIGIN(i,r)}function getChild(r,i){if(isErr(r))return r;const e=isOk(r)?r.value:r;if(!isReadable(e))return ERR_UNREADABLE_CHILD(i,e);if(!isPrimitive(e)&&i in e==!1)return ERR_NOT_FOUND(i,e);if(isPrimitive(e)&&void 0===e[i])return ERR_NOT_FOUND(i,e);const n=e[i];return new Ok(isFunction(n)?n.bind(e):n)}function ERR_UNREADABLE_CHILD(r,i){return Err.fromMessage(`Cannot read "${r}" from unreadable value: ${i}`)}function ERR_NOT_FOUND(r,i){return Err.fromMessage(`Property "${r}" not found on value: ${i}`)}function ERR_UNREADABLE_ORIGIN(r,i){return Err.fromMessage(`Cannot read "${r.join(".")}" from unreadable value: ${i}`)}