{"version":3,"file":"journal.js","names":["Entry","_interopRequireWildcard","require","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","JournalAnalysisInvalid","exports","JournalAnalysisReadWrite","JournalAnalysisReadOnly","commitJournal","journal","entry","commit","analyzeJournal","val","isInvalid","isChanged","prepareResetJournal","saved","Map","copy","clear","collectTodos","allTodos","todo","ref","todos","execTodos","todosSorted","Array","from","entries","sort","x","y","_","addTodo","txnId","todoEffect","added","isValid","valid"],"sources":["../../../../src/internal/stm/journal.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}