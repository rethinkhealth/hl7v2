{"version":3,"file":"context.js","names":["Equal","dual","globalValue","Hash","format","NodeInspectSymbol","toJSON","pipeArguments","hasProperty","EffectPrototype","effectVariance","option","TagTypeId","Symbol","for","ReferenceTypeId","STMSymbolKey","STMTypeId","TagProto","_op","_Service","_","_Identifier","toString","_id","key","stack","of","self","context","make","ReferenceProto","makeGenericTag","limit","Error","stackTraceLimit","creationError","tag","Object","create","defineProperty","get","Tag","id","TagClass","setPrototypeOf","Reference","options","ReferenceClass","defaultValue","TypeId","ContextProto","_Services","symbol","that","isContext","unsafeMap","size","k","keys","has","equals","cached","number","pipe","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","u","isTag","isReference","_empty","Map","empty","service","add","set","defaultValueCache","getDefaultValue","value","unsafeGetReference","unsafeGet","getOrElse","orElse","getOption","some","none","merge","s","mergeAll","ctxs","ctx","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"sources":["../../../src/internal/context.ts"],"sourcesContent":[null],"mappings":"AACA,OAAO,KAAKA,KAAK,MAAM,aAAa;AAEpC,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,WAAW,QAAQ,mBAAmB;AAC/C,OAAO,KAAKC,IAAI,MAAM,YAAY;AAClC,SAASC,MAAM,EAAEC,iBAAiB,EAAEC,MAAM,QAAQ,mBAAmB;AAErE,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,WAAW,QAAQ,iBAAiB;AAG7C,SAASC,eAAe,EAAEC,cAAc,QAAQ,iBAAiB;AACjE,OAAO,KAAKC,MAAM,MAAM,aAAa;AAErC;AACA,OAAO,MAAMC,SAAS,gBAAgBC,MAAM,CAACC,GAAG,CAAC,oBAAoB,CAAgB;AAErF;AACA,OAAO,MAAMC,eAAe,gBAAsBF,MAAM,CAACC,GAAG,CAAC,0BAA0B,CAAsB;AAE7G;AACA,MAAME,YAAY,GAAG,YAAY;AAEjC;AACA,OAAO,MAAMC,SAAS,gBAAkBJ,MAAM,CAACC,GAAG,CAChDE,YAAY,CACI;AAElB;AACA,OAAO,MAAME,QAAQ,GAAQ;EAC3B,GAAGT,eAAe;EAClBU,GAAG,EAAE,KAAK;EACV,CAACF,SAAS,GAAGP,cAAc;EAC3B,CAACE,SAAS,GAAG;IACXQ,QAAQ,EAAGC,CAAU,IAAKA,CAAC;IAC3BC,WAAW,EAAGD,CAAU,IAAKA;GAC9B;EACDE,QAAQA,CAAA;IACN,OAAOnB,MAAM,CAAC,IAAI,CAACE,MAAM,EAAE,CAAC;EAC9B,CAAC;EACDA,MAAMA,CAAA;IACJ,OAAO;MACLkB,GAAG,EAAE,KAAK;MACVC,GAAG,EAAE,IAAI,CAACA,GAAG;MACbC,KAAK,EAAE,IAAI,CAACA;KACb;EACH,CAAC;EACD,CAACrB,iBAAiB,IAAC;IACjB,OAAO,IAAI,CAACC,MAAM,EAAE;EACtB,CAAC;EACDqB,EAAEA,CAAUC,IAAa;IACvB,OAAOA,IAAI;EACb,CAAC;EACDC,OAAOA,CAELD,IAAa;IAEb,OAAOE,IAAI,CAAC,IAAI,EAAEF,IAAI,CAAC;EACzB;CACD;AAED,OAAO,MAAMG,cAAc,GAAQ;EACjC,GAAGb,QAAQ;EACX,CAACH,eAAe,GAAGA;CACpB;AAED;AACA,OAAO,MAAMiB,cAAc,GAAsCP,GAAW,IAAgC;EAC1G,MAAMQ,KAAK,GAAGC,KAAK,CAACC,eAAe;EACnCD,KAAK,CAACC,eAAe,GAAG,CAAC;EACzB,MAAMC,aAAa,GAAG,IAAIF,KAAK,EAAE;EACjCA,KAAK,CAACC,eAAe,GAAGF,KAAK;EAC7B,MAAMI,GAAG,GAAGC,MAAM,CAACC,MAAM,CAACrB,QAAQ,CAAC;EACnCoB,MAAM,CAACE,cAAc,CAACH,GAAG,EAAE,OAAO,EAAE;IAClCI,GAAGA,CAAA;MACD,OAAOL,aAAa,CAACV,KAAK;IAC5B;GACD,CAAC;EACFW,GAAG,CAACZ,GAAG,GAAGA,GAAG;EACb,OAAOY,GAAG;AACZ,CAAC;AAED;AACA,OAAO,MAAMK,GAAG,GAA6BC,EAAM,IAAK,MAA+C;EACrG,MAAMV,KAAK,GAAGC,KAAK,CAACC,eAAe;EACnCD,KAAK,CAACC,eAAe,GAAG,CAAC;EACzB,MAAMC,aAAa,GAAG,IAAIF,KAAK,EAAE;EACjCA,KAAK,CAACC,eAAe,GAAGF,KAAK;EAE7B,SAASW,QAAQA,CAAA,GAAI;EACrBN,MAAM,CAACO,cAAc,CAACD,QAAQ,EAAE1B,QAAQ,CAAC;EACzC0B,QAAQ,CAACnB,GAAG,GAAGkB,EAAE;EACjBL,MAAM,CAACE,cAAc,CAACI,QAAQ,EAAE,OAAO,EAAE;IACvCH,GAAGA,CAAA;MACD,OAAOL,aAAa,CAACV,KAAK;IAC5B;GACD,CAAC;EACF,OAAOkB,QAAe;AACxB,CAAC;AAED;AACA,OAAO,MAAME,SAAS,GAAGA,CAAA,KACzB,CAAmCH,EAAM,EAAEI,OAE1C,KAAyC;EACxC,MAAMd,KAAK,GAAGC,KAAK,CAACC,eAAe;EACnCD,KAAK,CAACC,eAAe,GAAG,CAAC;EACzB,MAAMC,aAAa,GAAG,IAAIF,KAAK,EAAE;EACjCA,KAAK,CAACC,eAAe,GAAGF,KAAK;EAE7B,SAASe,cAAcA,CAAA,GAAI;EAC3BV,MAAM,CAACO,cAAc,CAACG,cAAc,EAAEjB,cAAc,CAAC;EACrDiB,cAAc,CAACvB,GAAG,GAAGkB,EAAE;EACvBK,cAAc,CAACC,YAAY,GAAGF,OAAO,CAACE,YAAY;EAClDX,MAAM,CAACE,cAAc,CAACQ,cAAc,EAAE,OAAO,EAAE;IAC7CP,GAAGA,CAAA;MACD,OAAOL,aAAa,CAACV,KAAK;IAC5B;GACD,CAAC;EACF,OAAOsB,cAAqB;AAC9B,CAAC;AAED;AACA,OAAO,MAAME,MAAM,gBAAarC,MAAM,CAACC,GAAG,CAAC,gBAAgB,CAAa;AAExE;AACA,OAAO,MAAMqC,YAAY,GAA0C;EACjE,CAACD,MAAM,GAAG;IACRE,SAAS,EAAG/B,CAAU,IAAKA;GAC5B;EACD,CAACrB,KAAK,CAACqD,MAAM,EAAyBC,IAAa;IACjD,IAAIC,SAAS,CAACD,IAAI,CAAC,EAAE;MACnB,IAAI,IAAI,CAACE,SAAS,CAACC,IAAI,KAAKH,IAAI,CAACE,SAAS,CAACC,IAAI,EAAE;QAC/C,KAAK,MAAMC,CAAC,IAAI,IAAI,CAACF,SAAS,CAACG,IAAI,EAAE,EAAE;UACrC,IAAI,CAACL,IAAI,CAACE,SAAS,CAACI,GAAG,CAACF,CAAC,CAAC,IAAI,CAAC1D,KAAK,CAAC6D,MAAM,CAAC,IAAI,CAACL,SAAS,CAACf,GAAG,CAACiB,CAAC,CAAC,EAAEJ,IAAI,CAACE,SAAS,CAACf,GAAG,CAACiB,CAAC,CAAC,CAAC,EAAE;YACzF,OAAO,KAAK;UACd;QACF;QACA,OAAO,IAAI;MACb;IACF;IACA,OAAO,KAAK;EACd,CAAC;EACD,CAACvD,IAAI,CAACkD,MAAM,IAAC;IACX,OAAOlD,IAAI,CAAC2D,MAAM,CAAC,IAAI,EAAE3D,IAAI,CAAC4D,MAAM,CAAC,IAAI,CAACP,SAAS,CAACC,IAAI,CAAC,CAAC;EAC5D,CAAC;EACDO,IAAIA,CAAA;IACF,OAAOzD,aAAa,CAAC,IAAI,EAAE0D,SAAS,CAAC;EACvC,CAAC;EACD1C,QAAQA,CAAA;IACN,OAAOnB,MAAM,CAAC,IAAI,CAACE,MAAM,EAAE,CAAC;EAC9B,CAAC;EACDA,MAAMA,CAAA;IACJ,OAAO;MACLkB,GAAG,EAAE,SAAS;MACd0C,QAAQ,EAAEC,KAAK,CAACC,IAAI,CAAC,IAAI,CAACZ,SAAS,CAAC,CAACa,GAAG,CAAC/D,MAAM;KAChD;EACH,CAAC;EACD,CAACD,iBAAiB,IAAC;IACjB,OAAQ,IAAY,CAACC,MAAM,EAAE;EAC/B;CACD;AAED;AACA,OAAO,MAAMgE,WAAW,GAAcd,SAA2B,IAAyB;EACxF,MAAM3B,OAAO,GAAGS,MAAM,CAACC,MAAM,CAACY,YAAY,CAAC;EAC3CtB,OAAO,CAAC2B,SAAS,GAAGA,SAAS;EAC7B,OAAO3B,OAAO;AAChB,CAAC;AAED,MAAM0C,oBAAoB,GAAIlC,GAAoB,IAAI;EACpD,MAAMmC,KAAK,GAAG,IAAItC,KAAK,CAAC,oBAAoBG,GAAG,CAACZ,GAAG,GAAG,KAAKgD,MAAM,CAACpC,GAAG,CAACZ,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,CAAC;EACpF,IAAIY,GAAG,CAACX,KAAK,EAAE;IACb,MAAMgD,KAAK,GAAGrC,GAAG,CAACX,KAAK,CAACiD,KAAK,CAAC,IAAI,CAAC;IACnC,IAAID,KAAK,CAACE,MAAM,GAAG,CAAC,EAAE;MACpB,MAAMC,OAAO,GAAGH,KAAK,CAAC,CAAC,CAAC,CAACI,KAAK,CAAC,SAAS,CAAC;MACzC,IAAID,OAAO,EAAE;QACXL,KAAK,CAACO,OAAO,GAAGP,KAAK,CAACO,OAAO,GAAG,gBAAgBF,OAAO,CAAC,CAAC,CAAC,GAAG;MAC/D;IACF;EACF;EACA,IAAIL,KAAK,CAAC9C,KAAK,EAAE;IACf,MAAMgD,KAAK,GAAGF,KAAK,CAAC9C,KAAK,CAACiD,KAAK,CAAC,IAAI,CAAC;IACrCD,KAAK,CAACM,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC;IAClBR,KAAK,CAAC9C,KAAK,GAAGgD,KAAK,CAACO,IAAI,CAAC,IAAI,CAAC;EAChC;EACA,OAAOT,KAAK;AACd,CAAC;AAED;AACA,OAAO,MAAMjB,SAAS,GAAI2B,CAAU,IAA4B1E,WAAW,CAAC0E,CAAC,EAAEhC,MAAM,CAAC;AAEtF;AACA,OAAO,MAAMiC,KAAK,GAAID,CAAU,IAA2B1E,WAAW,CAAC0E,CAAC,EAAEtE,SAAS,CAAC;AAEpF;AACA,OAAO,MAAMwE,WAAW,GAAIF,CAAU,IAAiC1E,WAAW,CAAC0E,CAAC,EAAEnE,eAAe,CAAC;AAEtG,MAAMsE,MAAM,gBAAGf,WAAW,cAAC,IAAIgB,GAAG,EAAE,CAAC;AAErC;AACA,OAAO,MAAMC,KAAK,GAAGA,CAAA,KAAwBF,MAAM;AAEnD;AACA,OAAO,MAAMvD,IAAI,GAAGA,CAAOO,GAAgB,EAAEmD,OAAmB,KAC9DlB,WAAW,CAAC,IAAIgB,GAAG,CAAC,CAAC,CAACjD,GAAG,CAACZ,GAAG,EAAE+D,OAAO,CAAC,CAAC,CAAC,CAAC;AAE5C;AACA,OAAO,MAAMC,GAAG,gBAAGxF,IAAI,CAYrB,CAAC,EAAE,CAAC2B,IAAI,EAAES,GAAG,EAAEmD,OAAO,KAAI;EAC1B,MAAMnB,GAAG,GAAG,IAAIiB,GAAG,CAAC1D,IAAI,CAAC4B,SAAS,CAAC;EACnCa,GAAG,CAACqB,GAAG,CAACrD,GAAG,CAACZ,GAAG,EAAE+D,OAAO,CAAC;EACzB,OAAOlB,WAAW,CAACD,GAAG,CAAC;AACzB,CAAC,CAAC;AAEF,MAAMsB,iBAAiB,gBAAGzF,WAAW,CAAC,kCAAkC,EAAE,MAAM,IAAIoF,GAAG,EAAe,CAAC;AACvG,MAAMM,eAAe,GAAIvD,GAA0B,IAAI;EACrD,IAAIsD,iBAAiB,CAAC/B,GAAG,CAACvB,GAAG,CAACZ,GAAG,CAAC,EAAE;IAClC,OAAOkE,iBAAiB,CAAClD,GAAG,CAACJ,GAAG,CAACZ,GAAG,CAAC;EACvC;EACA,MAAMoE,KAAK,GAAGxD,GAAG,CAACY,YAAY,EAAE;EAChC0C,iBAAiB,CAACD,GAAG,CAACrD,GAAG,CAACZ,GAAG,EAAEoE,KAAK,CAAC;EACrC,OAAOA,KAAK;AACd,CAAC;AAED;AACA,OAAO,MAAMC,kBAAkB,GAAGA,CAAiBlE,IAAyB,EAAES,GAAsB,KAAO;EACzG,OAAOT,IAAI,CAAC4B,SAAS,CAACI,GAAG,CAACvB,GAAG,CAACZ,GAAG,CAAC,GAAGG,IAAI,CAAC4B,SAAS,CAACf,GAAG,CAACJ,GAAG,CAACZ,GAAG,CAAC,GAAGmE,eAAe,CAACvD,GAAG,CAAC;AACzF,CAAC;AAED;AACA,OAAO,MAAM0D,SAAS,gBAAG9F,IAAI,CAG3B,CAAC,EAAE,CAAC2B,IAAI,EAAES,GAAG,KAAI;EACjB,IAAI,CAACT,IAAI,CAAC4B,SAAS,CAACI,GAAG,CAACvB,GAAG,CAACZ,GAAG,CAAC,EAAE;IAChC,IAAIV,eAAe,IAAIsB,GAAG,EAAE,OAAOuD,eAAe,CAACvD,GAAU,CAAC;IAC9D,MAAMkC,oBAAoB,CAAClC,GAAG,CAAC;EACjC;EACA,OAAOT,IAAI,CAAC4B,SAAS,CAACf,GAAG,CAACJ,GAAG,CAACZ,GAAG,CAAS;AAC5C,CAAC,CAAC;AAEF;AACA,OAAO,MAAMgB,GAAG,GAKZsD,SAAgB;AAEpB;AACA,OAAO,MAAMC,SAAS,gBAAG/F,IAAI,CAG3B,CAAC,EAAE,CAAC2B,IAAI,EAAES,GAAG,EAAE4D,MAAM,KAAI;EACzB,IAAI,CAACrE,IAAI,CAAC4B,SAAS,CAACI,GAAG,CAACvB,GAAG,CAACZ,GAAG,CAAC,EAAE;IAChC,OAAO2D,WAAW,CAAC/C,GAAG,CAAC,GAAGuD,eAAe,CAACvD,GAAG,CAAC,GAAG4D,MAAM,EAAE;EAC3D;EACA,OAAOrE,IAAI,CAAC4B,SAAS,CAACf,GAAG,CAACJ,GAAG,CAACZ,GAAG,CAAS;AAC5C,CAAC,CAAC;AAEF;AACA,OAAO,MAAMyE,SAAS,gBAAGjG,IAAI,CAG3B,CAAC,EAAE,CAAC2B,IAAI,EAAES,GAAG,KAAI;EACjB,IAAI,CAACT,IAAI,CAAC4B,SAAS,CAACI,GAAG,CAACvB,GAAG,CAACZ,GAAG,CAAC,EAAE;IAChC,OAAO2D,WAAW,CAAC/C,GAAG,CAAC,GAAG1B,MAAM,CAACwF,IAAI,CAACP,eAAe,CAACvD,GAAG,CAAC,CAAC,GAAG1B,MAAM,CAACyF,IAAI;EAC3E;EACA,OAAOzF,MAAM,CAACwF,IAAI,CAACvE,IAAI,CAAC4B,SAAS,CAACf,GAAG,CAACJ,GAAG,CAACZ,GAAG,CAAS,CAAC;AACzD,CAAC,CAAC;AAEF;AACA,OAAO,MAAM4E,KAAK,gBAAGpG,IAAI,CAGvB,CAAC,EAAE,CAAC2B,IAAI,EAAE0B,IAAI,KAAI;EAClB,MAAMe,GAAG,GAAG,IAAIiB,GAAG,CAAC1D,IAAI,CAAC4B,SAAS,CAAC;EACnC,KAAK,MAAM,CAACnB,GAAG,EAAEiE,CAAC,CAAC,IAAIhD,IAAI,CAACE,SAAS,EAAE;IACrCa,GAAG,CAACqB,GAAG,CAACrD,GAAG,EAAEiE,CAAC,CAAC;EACjB;EACA,OAAOhC,WAAW,CAACD,GAAG,CAAC;AACzB,CAAC,CAAC;AAEF;AACA,OAAO,MAAMkC,QAAQ,GAAGA,CACtB,GAAGC,IAA8C,KACzB;EACxB,MAAMnC,GAAG,GAAG,IAAIiB,GAAG,EAAE;EACrB,KAAK,MAAMmB,GAAG,IAAID,IAAI,EAAE;IACtB,KAAK,MAAM,CAACnE,GAAG,EAAEiE,CAAC,CAAC,IAAIG,GAAG,CAACjD,SAAS,EAAE;MACpCa,GAAG,CAACqB,GAAG,CAACrD,GAAG,EAAEiE,CAAC,CAAC;IACjB;EACF;EACA,OAAOhC,WAAW,CAACD,GAAG,CAAC;AACzB,CAAC;AAED;AACA,OAAO,MAAMqC,IAAI,GACfA,CAA8C,GAAGC,IAAU,KAChD/E,IAAyB,IAEhC;EACF,MAAMgF,MAAM,GAAG,IAAIC,GAAG,CAASF,IAAI,CAACtC,GAAG,CAAEhD,CAAC,IAAKA,CAAC,CAACI,GAAG,CAAC,CAAC;EACtD,MAAMqF,MAAM,GAAG,IAAIxB,GAAG,EAAE;EACxB,KAAK,MAAM,CAACjD,GAAG,EAAEiE,CAAC,CAAC,IAAI1E,IAAI,CAAC4B,SAAS,CAACuD,OAAO,EAAE,EAAE;IAC/C,IAAIH,MAAM,CAAChD,GAAG,CAACvB,GAAG,CAAC,EAAE;MACnByE,MAAM,CAACpB,GAAG,CAACrD,GAAG,EAAEiE,CAAC,CAAC;IACpB;EACF;EACA,OAAOhC,WAAW,CAACwC,MAAM,CAAC;AAC5B,CAAC;AAEH;AACA,OAAO,MAAME,IAAI,GACfA,CAA8C,GAAGL,IAAU,KAChD/E,IAAyB,IAEhC;EACF,MAAMkF,MAAM,GAAG,IAAIxB,GAAG,CAAC1D,IAAI,CAAC4B,SAAS,CAAC;EACtC,KAAK,MAAMnB,GAAG,IAAIsE,IAAI,EAAE;IACtBG,MAAM,CAACG,MAAM,CAAC5E,GAAG,CAACZ,GAAG,CAAC;EACxB;EACA,OAAO6C,WAAW,CAACwC,MAAM,CAAC;AAC5B,CAAC","ignoreList":[]}